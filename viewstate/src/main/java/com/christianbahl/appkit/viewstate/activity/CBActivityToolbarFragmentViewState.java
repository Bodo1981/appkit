package com.christianbahl.appkit.viewstate.activity;

import android.os.Bundle;
import android.support.annotation.NonNull;
import android.support.v4.app.Fragment;
import com.hannesdorfmann.mosby.mvp.MvpPresenter;
import com.hannesdorfmann.mosby.mvp.MvpView;

/**
 * @author Christian Bahl
 */
public abstract class CBActivityToolbarFragmentViewState<V extends MvpView, P extends MvpPresenter<V>> extends CBActivityToolbarViewState<V, P> {

  @Override protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    if (savedInstanceState == null) {
      Fragment fragment = createFragmentToDisplay();

      if (fragment == null) {
        throw new NullPointerException(
            "Fragment is null. Did you return null in createFragmentToDisplay()?");
      }

      getSupportFragmentManager().beginTransaction()
          .replace(com.christianbahl.appkit.core.R.id.contentView, fragment)
          .commit();
    }
  }

  @Override @NonNull protected Integer getLayoutRes() {
    return com.christianbahl.appkit.core.R.layout.cb_activity_toolbar_fragment;
  }

  /**
   * Returns the {@link Fragment} which should be displayed by this activity.
   *
   * @return {@link Fragment}
   */
  @NonNull protected abstract Fragment createFragmentToDisplay();
}
